(function(e){function t(t){for(var c,l,o=t[0],i=t[1],u=t[2],s=0,d=[];s<o.length;s++)l=o[s],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&d.push(r[l][0]),r[l]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);b&&b(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],c=!0,o=1;o<n.length;o++){var i=n[o];0!==r[i]&&(c=!1)}c&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var c={},r={app:0},a=[];function l(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=c,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)l.d(n,c,function(t){return e[t]}.bind(null,c));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var b=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0314":function(e,t,n){},"0730":function(e,t,n){"use strict";n("658c")},"658c":function(e,t,n){},"9cb4":function(e,t,n){"use strict";n("0314")},cd49:function(e,t,n){"use strict";n.r(t);var c=n("7a23");const r={id:"nav"};function a(e,t){const n=Object(c["R"])("router-link"),a=Object(c["R"])("router-view");return Object(c["I"])(),Object(c["k"])(c["b"],null,[Object(c["l"])("div",r,[Object(c["p"])(n,{to:"/"})]),Object(c["p"])(a)],64)}var l=n("6b0d"),o=n.n(l);const i={},u=o()(i,[["render",a]]);var b=u,s=n("156a"),d=(n("d361"),n("6605")),f={style:{overflow:"hidden"}},O={class:"chatlist",id:"pzpMain"},j={class:"chat-user"},p={class:"time"},v=["innerHTML"],m={class:"chat-user"},h={class:"time"},y=["innerHTML"],g=Object(c["o"])("发 送"),k=Object(c["l"])("div",{style:{"margin-bottom":"10px"}}," 受限于浏览器机能问题，无法获取到具体的文件路径，请自行输入 ",-1),N={style:{"margin-bottom":"10px"}},w=Object(c["o"])(" 用户列表 ");function _(e,t,n,r,a,l){var o=Object(c["R"])("Heads"),i=Object(c["R"])("a-layout-header"),u=Object(c["R"])("a-avatar"),b=Object(c["R"])("a-layout-content"),s=Object(c["R"])("icon-user"),d=Object(c["R"])("icon-drive-file"),_=Object(c["R"])("a-space"),U=Object(c["R"])("a-button"),C=Object(c["R"])("a-input"),x=Object(c["R"])("a-layout-footer"),P=Object(c["R"])("a-layout"),M=Object(c["R"])("a-col"),R=Object(c["R"])("a-row"),F=Object(c["R"])("a-form-item"),S=Object(c["R"])("a-form"),B=Object(c["R"])("a-modal"),T=Object(c["R"])("a-list-item"),V=Object(c["R"])("a-list"),I=Object(c["R"])("a-drawer");return Object(c["I"])(),Object(c["k"])("div",f,[Object(c["p"])(R,{class:"grid-demo"},{default:Object(c["bb"])((function(){return[Object(c["p"])(M,null,{default:Object(c["bb"])((function(){return[Object(c["p"])(P,{style:Object(c["B"])({height:.94*e.realHeight+"px"})},{default:Object(c["bb"])((function(){return[Object(c["p"])(i,{style:{height:"10%"}},{default:Object(c["bb"])((function(){return[Object(c["p"])(o,{name:e.userName},null,8,["name"])]})),_:1}),Object(c["p"])(b,{style:{height:"80%"}},{default:Object(c["bb"])((function(){return[Object(c["l"])("section",O,[Object(c["l"])("ul",null,[(Object(c["I"])(!0),Object(c["k"])(c["b"],null,Object(c["P"])(e.records,(function(e,t){return Object(c["I"])(),Object(c["k"])(c["b"],null,[1==e.type?(Object(c["I"])(),Object(c["k"])("li",{class:"chat-mine",key:t},[Object(c["l"])("div",j,[Object(c["p"])(u,{style:{backgroundColor:"#14a9f8"}},{default:Object(c["bb"])((function(){return[Object(c["o"])(Object(c["U"])(e.name),1)]})),_:2},1024)]),Object(c["l"])("div",p,[Object(c["l"])("cite",null,[Object(c["o"])(Object(c["U"])(e.name),1),Object(c["l"])("i",null,Object(c["U"])(e.time),1)])]),Object(c["l"])("div",{class:"chat-text",innerHTML:e.content},null,8,v)])):Object(c["j"])("",!0),2==e.type?(Object(c["I"])(),Object(c["k"])("li",{key:t},[Object(c["l"])("div",m,[Object(c["p"])(u,{style:{backgroundColor:"#14a9f8"}},{default:Object(c["bb"])((function(){return[Object(c["o"])(Object(c["U"])(e.name),1)]})),_:2},1024)]),Object(c["l"])("div",h,[Object(c["l"])("cite",null,[Object(c["o"])(Object(c["U"])(e.name),1),Object(c["l"])("i",null,Object(c["U"])(e.time),1)])]),Object(c["l"])("div",{class:"chat-text",innerHTML:e.content},null,8,y)])):Object(c["j"])("",!0)],64)})),256))])])]})),_:1}),Object(c["p"])(x,null,{default:Object(c["bb"])((function(){return[Object(c["p"])(_,{size:"medium",style:{"padding-left":"13px"}},{default:Object(c["bb"])((function(){return[Object(c["p"])(u,{size:43,shape:"square",onClick:t[0]||(t[0]=function(t){return e.userVis=!0}),style:{backgroundColor:"#3370ff"}},{default:Object(c["bb"])((function(){return[Object(c["p"])(s)]})),_:1}),Object(c["p"])(u,{size:43,style:{backgroundColor:"#3370ff"},shape:"square",onClick:t[1]||(t[1]=function(t){return e.filevisible=!0})},{default:Object(c["bb"])((function(){return[Object(c["p"])(d)]})),_:1})]})),_:1}),Object(c["l"])("div",null,[Object(c["p"])(C,{modelValue:e.message,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.message=t}),style:{width:"100%"},placeholder:"Please enter something","allow-clear":""},{suffix:Object(c["bb"])((function(){return[Object(c["p"])(U,{style:{"margin-right":"-20%",width:"120%"},type:"primary",onClick:e.sendMessage,status:"success"},{default:Object(c["bb"])((function(){return[g]})),_:1},8,["onClick"])]})),_:1},8,["modelValue"])])]})),_:1})]})),_:1},8,["style"])]})),_:1})]})),_:1}),Object(c["p"])(B,{width:"350px",visible:e.visible,"onUpdate:visible":t[5]||(t[5]=function(t){return e.visible=t}),title:"连接服务器",closable:!1,maskClosable:!1,"hide-cancel":!0,onBeforeOk:e.handleBeforeOk},{default:Object(c["bb"])((function(){return[Object(c["p"])(S,{model:e.form},{default:Object(c["bb"])((function(){return[Object(c["p"])(F,{field:"name",label:"用户名"},{default:Object(c["bb"])((function(){return[Object(c["p"])(C,{modelValue:e.form.userName,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.userName=t})},null,8,["modelValue"])]})),_:1}),Object(c["p"])(F,{field:"post",label:"中介服务器"},{default:Object(c["bb"])((function(){return[Object(c["p"])(C,{modelValue:e.form.proxyUrl,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.proxyUrl=t})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","onBeforeOk"]),Object(c["p"])(B,{width:350,visible:e.filevisible,"onUpdate:visible":t[7]||(t[7]=function(t){return e.filevisible=t}),title:"文件上传",onBeforeOk:e.handleFilePathOk},{default:Object(c["bb"])((function(){return[k,Object(c["p"])(S,{layout:"inline",model:e.filePath},{default:Object(c["bb"])((function(){return[Object(c["p"])(F,{label:"上传路径"},{default:Object(c["bb"])((function(){return[Object(c["p"])(C,{placeholder:"C:\\文件夹\\上传文件.txt",modelValue:e.filePath.filePath,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.filePath.filePath=t})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","onBeforeOk"]),Object(c["p"])(B,{visible:e.accpectFilevisible,"onUpdate:visible":t[8]||(t[8]=function(t){return e.accpectFilevisible=t}),onOk:e.accpectFileOk,onCancel:e.accpectFilecancel,width:350,title:"文件接收通知"},{default:Object(c["bb"])((function(){return[Object(c["l"])("div",N," 是否接收： 用户 "+Object(c["U"])(e.accpectFileBody.senderName)+" 发送 "+Object(c["U"])(e.accpectFileBody.fileName)+"文件，文件大小为"+Object(c["U"])(e.fileCompute(e.accpectFileBody.fileLength))+"的文件 ",1)]})),_:1},8,["visible","onOk","onCancel"]),Object(c["p"])(I,{width:240,visible:e.userVis,onCancel:e.handleCancel,footer:!1,unmountOnClose:""},{title:Object(c["bb"])((function(){return[w]})),default:Object(c["bb"])((function(){return[Object(c["p"])(V,{bordered:!1},{default:Object(c["bb"])((function(){return[(Object(c["I"])(!0),Object(c["k"])(c["b"],null,Object(c["P"])(e.userList,(function(t,n){return Object(c["I"])(),Object(c["i"])(T,{onClick:function(n){return e.changeUserName(t)},key:n},{default:Object(c["bb"])((function(){return[Object(c["o"])(Object(c["U"])(t),1)]})),_:2},1032,["onClick"])})),128))]})),_:1})]})),_:1},8,["visible","onCancel"])])}var U=n("9ab4"),C=n("6281"),x=n("ea3e"),P=n("5f71"),M=function(){function e(e){this.senderName=e}return e.prototype.toJSONObj=function(){return"JSON.stringify(this)"},e.regisUserName=function(t,n){var c=new e(t);return c.methodType=5,c.serverUdpProxy=n,JSON.stringify(c)},e.sendMessage=function(t,n,c){var r=new e(t);return r.recipientName=n,r.methodType=6,r.bodyType="string",r.body=c,JSON.stringify(r)},e.sendMessageByType=function(t,n,c,r){var a=new e(t);return a.recipientName=n,a.methodType=c,a.bodyType="string",a.body=r,JSON.stringify(a)},e}();function R(e){var t=document.getElementById(e);t&&(console.log((null===t||void 0===t?void 0:t.scrollHeight)+100),t.scrollTop=(null===t||void 0===t?void 0:t.scrollHeight)+900)}var F=n("bc3a"),S=n.n(F),B="/api/hasFile?filePath=";function T(e){return S.a.get(B+e)}function V(e){return e?e<1024?e+"Byte":e>1024&&e<1048576?(e/1024).toFixed(2)+"Kb":e>1048576&&e<1073741824?(e/1048576).toFixed(2)+"Mb":(e/1073741824).toFixed(2)+"Gb":""}var I={class:"top"},H={class:"name"};function J(e,t,n,r,a,l){return Object(c["I"])(),Object(c["k"])("section",I,[Object(c["l"])("span",H,Object(c["U"])(e.name),1)])}var z=Object(c["q"])({name:"heads",props:{name:{type:String}},setup:function(e){var t=Object(c["W"])(e).name;return{name:t}}});n("0730");const D=o()(z,[["render",J],["__scopeId","data-v-622a2ad9"]]);var L=D,q=new RegExp(/^[a-zA-Z]:\\(?:[\u4e00-\u9fa5_a-zA-Z0-9]+\\)*[\u4e00-\u9fa5_a-zA-Z0-9]+\.\w+$/),Z=Object(c["q"])({name:"Home",components:{Heads:L,IconUser:C["a"],IconDriveFile:x["a"]},setup:function(){var e=this,t=Object(c["M"])({filePath:""}),n=Object(c["N"])(!1),r=Object(c["N"])(""),a=Object(c["N"])(""),l=Object(c["N"])(!1),o=Object(c["N"])(!1),i=Object(c["N"])(""),u=Object(c["N"])([]),b=Object(c["N"])(!0),s=Object(c["M"])({userName:"",proxyUrl:""}),d=null,f=function(){j.value.senderName&&(null===d||void 0===d||d.send(M.sendMessageByType(i.value,j.value.senderName,8,JSON.stringify(j.value)))),n.value=!1},O=function(){n.value=!1},j=Object(c["N"])({}),p=Object(c["N"])([{type:2,time:(new Date).toDateString(),name:"系统提示",content:"请选中联系人，进行聊天"}]);Object(c["Z"])(p.value,(function(){return Object(U["a"])(e,void 0,void 0,(function(){return Object(U["b"])(this,(function(e){switch(e.label){case 0:return[4,Object(c["y"])()];case 1:return e.sent(),R("pzpMain"),[2]}}))}))}));var v=function(e,t,c,r){d=new WebSocket(t),d.onopen=function(){null===d||void 0===d||d.send(M.regisUserName(s.userName,s.proxyUrl))},d.onmessage=function(e){if(e.data){var t=JSON.parse(e.data);if(void 0!=t.resCode||null!=t.resCode)switch(0==t.resCode&&(P["a"].error(t.errorMsg?t.errorMsg:"发送信息错误"),r(!1)),9==t.resCode&&(P["a"].success("连接服务器成功。。"),r(!0)),t.resCode){case 4:u.value=t.body;break;case 7:j.value=t.body,n.value=!0;break;case 8:var c=t.body;p.value.push({type:2,time:(new Date).toDateString(),name:c.senderName,content:c.message});break;case 11:P["a"].info(t.body);break}else P["a"].error(JSON.stringify(t))}},d.onclose=function(){P["a"].error("服务器关闭")}},m=function(){if(a.value){if(!r.value)return void P["a"].error("发送内容不可以为空！");p.value.push({type:1,time:(new Date).toDateString(),name:i.value,content:r.value}),null===d||void 0===d||d.send(M.sendMessage(i.value,a.value,r.value)),r.value=""}else P["a"].error("请选择发送人！"),o.value=!0},h=function(e){return t.filePath?q.test(t.filePath)?a.value?void T(t.filePath).then((function(n){if(!n.data.res)return P["a"].error("未找到文件！"),void e(!1);P["a"].success("找到文件,进行数据发送"),null===d||void 0===d||d.send(M.sendMessageByType(i.value,a.value,7,t.filePath)),e(!0)})).catch((function(){P["a"].error("系统错误"),e(!1)})):(P["a"].error("请选择发送人！"),void e(!1)):(P["a"].error("输入文件路径有误请重新输入！"),void e(!1)):(P["a"].error("请输入具体文件地址路径！"),void e(!1))},y=function(e){i.value=s.userName;var t=document.getElementById("demo1");t&&v(s.userName,"ws://127.0.0.1:"+t.value+"/ssssss",s.proxyUrl,e)},g=function(){o.value=!1},k=function(e){i.value==e?P["a"].error("无法选择本人进行聊天"):(a.value=e,o.value=!1)},N=Object(c["N"])(600);return Object(c["F"])((function(){N.value=window.innerHeight})),{realHeight:N,changeUserName:k,userVis:o,fileCompute:V,handleCancel:g,userName:i,visible:b,filevisible:l,form:s,handleBeforeOk:y,records:p,filePath:t,userList:u,accpectFileOk:f,accpectFilecancel:O,handleFilePathOk:h,message:r,accpectFileBody:j,accpectFilevisible:n,sendMessage:m}}});n("9cb4");const A=o()(Z,[["render",_]]);var E=A,W=[{path:"/",name:"Home",component:E}],G=Object(d["a"])({history:Object(d["b"])(),routes:W}),K=G;Object(c["h"])(b).use(K).use(s["a"]).mount("#app")}});
//# sourceMappingURL=app.777cf501.js.map